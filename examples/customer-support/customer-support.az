package "customer-support" version "0.1.0" lang "1.0"

# A customer support agent with ticket lookup, knowledge base search,
# and escalation capabilities across dev and prod environments.

prompt "support" {
  content "You are a customer support agent for Acme Corp.
           Be empathetic, concise, and solution-oriented.
           Always greet the customer by name when available.
           If you cannot resolve an issue, escalate to a human agent."
}

skill "lookup-ticket" {
  description "Look up a customer support ticket by ID"
  input { ticket_id string required }
  output { ticket string }
  execution command "ticket-lookup"
}

skill "search-kb" {
  description "Search the knowledge base for relevant articles"
  input { query string required }
  output { articles string }
  execution command "kb-search"
}

skill "escalate" {
  description "Escalate the conversation to a human agent"
  input { reason string required }
  output { escalation_id string }
  execution command "escalate-tool"
}

agent "support-bot" {
  uses prompt "support"
  uses skill "lookup-ticket"
  uses skill "search-kb"
  uses skill "escalate"
  model "claude-sonnet-4-20250514"
}

secret "api-key" {
  store "env"
  env "ACME_API_KEY"
}

environment "dev" {
  agent "support-bot" {
    model "claude-haiku-latest"
  }
}

environment "prod" {
  agent "support-bot" {
    model "claude-sonnet-4-20250514"
  }
}

binding "local" adapter "local-mcp" {
  default true
}
